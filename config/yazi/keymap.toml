# Yazi Keymap - MacOS and DevOps Shortcuts
# ~/.config/yazi/keymap.toml

[mgr]

prepend_keymap = [

  # https://github.com/yazi-rs/plugins/blob/main/smart-enter.yazi/README.md
  { on   = "<ENTER>", run  = "plugin smart-enter", desc = "Enter the child directory, or open the file" },

  # macOS: Preview files with the system Quick Look
  { on = "<C-p>", run = "shell -- qlmanage -p %s" },

  # -- DevOps Tools (g prefix = "go to tool") --------------------------------

    # Terraform plan
  { on = ["g", "t"], run = "shell 'tofu plan' --block", desc = "Terraform plan" },

  # Helm list
  { on = ["g", "h"], run = "shell 'helm list --all-namespaces' --block", desc = "Helm: list releases" },

  # Vault status
  { on = ["g", "v"], run = "shell 'vault status' --block", desc = "Vault status" },

  # Ansible - pick and run playbook via fzf
  { on = ["g", "a"], run = "shell 'f=$(fd -e yaml -e yml . --type f | fzf) && ansible-playbook $f' --block", desc = "Ansible: pick playbook" },

  # AWS - caller identity
  { on = ["g", "w"], run = "shell 'aws sts get-caller-identity | jq .' --block", desc = "AWS: caller identity" },

  # -- General Shortcuts ------------------------------------------------------

  # bat preview of current file
  { on = ["B"], run = "shell 'bat --paging always \"$1\"' --block", desc = "bat: preview file" },

  # Shell command in cwd
  { on = ["!"], run = "shell --block --interactive", desc = "Run shell command" },
]
